{"remainingRequest":"E:\\QuanLyDaoTao\\Front-end\\node_modules\\babel-loader\\lib\\index.js!E:\\QuanLyDaoTao\\Front-end\\src\\app\\scenes\\pages\\ManageClass\\components\\Class\\components\\FormAddDetail\\FormAddDetail.jsx","dependencies":[{"path":"E:\\QuanLyDaoTao\\Front-end\\src\\app\\scenes\\pages\\ManageClass\\components\\Class\\components\\FormAddDetail\\FormAddDetail.jsx","mtime":1560144470976},{"path":"E:\\QuanLyDaoTao\\Front-end\\.babelrc","mtime":1559591694343},{"path":"E:\\QuanLyDaoTao\\Front-end\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\QuanLyDaoTao\\Front-end\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar REACT_ELEMENT_TYPE;\n\nfunction _jsx(type, props, key, children) { if (!REACT_ELEMENT_TYPE) { REACT_ELEMENT_TYPE = typeof Symbol === \"function\" && Symbol.for && Symbol.for(\"react.element\") || 0xeac7; } var defaultProps = type && type.defaultProps; var childrenLength = arguments.length - 3; if (!props && childrenLength !== 0) { props = { children: void 0 }; } if (props && defaultProps) { for (var propName in defaultProps) { if (props[propName] === void 0) { props[propName] = defaultProps[propName]; } } } else if (!props) { props = defaultProps || {}; } if (childrenLength === 1) { props.children = children; } else if (childrenLength > 1) { var childArray = new Array(childrenLength); for (var i = 0; i < childrenLength; i++) { childArray[i] = arguments[i + 3]; } props.children = childArray; } return { $$typeof: REACT_ELEMENT_TYPE, type: type, key: key === undefined ? null : '' + key, ref: null, props: props, _owner: null }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport styles from './styles.css';\nimport DocumentTitle from 'react-document-title';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PropTypes from 'prop-types';\nimport { Prompt } from 'react-router-dom';\nimport { withRouter } from 'react-router';\nimport { withStyles } from '@material-ui/core/styles';\nimport amber from '@material-ui/core/colors/amber';\nimport AddIcon from '@material-ui/icons/Add';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport { connect } from 'react-redux';\nimport { classOperations } from '../../../../../../../state/ducks/class';\nimport randomstring from 'randomstring';\n\nvar style = function style(theme) {\n  return {\n    snackbar: {\n      margin: theme.spacing.unit\n    },\n    close: {\n      padding: theme.spacing.unit / 2\n    },\n    error: {\n      backgroundColor: amber[700]\n    },\n    error1: {\n      backgroundColor: theme.palette.error.dark\n    },\n    success: {\n      backgroundColor: '#338ef9'\n    },\n    button: {\n      margin: theme.spacing.unit,\n      fontSize: 13\n    },\n    leftIcon: {\n      marginRight: theme.spacing.unit\n    },\n    rightIcon: {\n      marginLeft: theme.spacing.unit\n    },\n    iconSmall: {\n      fontSize: 20\n    }\n  };\n};\n\nvar _ref =\n/*#__PURE__*/\n_jsx(CloseIcon, {});\n\nvar _ref2 =\n/*#__PURE__*/\n_jsx(\"li\", {}, void 0, \"Th\\xEAm l\\u1EDBp h\\u1ECDc th\\xE0nh c\\xF4ng!\");\n\nvar _ref3 =\n/*#__PURE__*/\n_jsx(CloseIcon, {});\n\nvar _ref4 =\n/*#__PURE__*/\n_jsx(\"h4\", {\n  className: \"label-title\"\n}, void 0, \"Th\\xF4ng tin chi ti\\u1EBFt l\\u1EDBp h\\u1ECDc\");\n\nvar _ref5 =\n/*#__PURE__*/\n_jsx(\"div\", {}, void 0, _jsx(\"div\", {}, void 0, _jsx(\"b\", {}, void 0, \"Ch\\xFA \\xFD:\")), _jsx(\"ul\", {\n  className: \"attention\"\n}, void 0, _jsx(\"li\", {}, void 0, \"- C\\xE1c tr\\u01B0\\u1EDDng th\\xF4ng tin \\u0111\\xE1nh d\\u1EA5u \", _jsx(\"b\", {}, void 0, \"(*)\"), \" \\u1EDF d\\u01B0\\u1EDBi l\\xE0 b\\u1EAFt bu\\u1ED9c.\"), _jsx(\"li\", {}, void 0, \"- M\\u1ED7i l\\u1EDBp h\\u1ECDc s\\u1EBD t\\u1EF1 \\u0111\\u1ED9ng c\\xF3 m\\u1ED9t m\\xE3 l\\u1EDBp kh\\xE1c nhau\"), _jsx(\"li\", {}, void 0, \"- T\\xEAn n\\u0103m h\\u1ECDc t\\u1ED1i thi\\u1EC3u \", _jsx(\"b\", {}, void 0, \"5 k\\xFD t\\u1EF1\"), \" v\\xE0 t\\u1ED1i \\u0111a \", _jsx(\"b\", {}, void 0, \"100 k\\xFD t\\u1EF1.\"), \".\"), _jsx(\"li\", {}, void 0, \"- Ng\\xE0y m\\u1EDF l\\u1EDBp ph\\u1EA3i nh\\u1ECF h\\u01A1n ng\\xE0y \\u0111\\xF3ng l\\u1EDBp.\")));\n\nvar _ref6 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"classCode\"\n}, void 0, _jsx(\"b\", {}, void 0, \"M\\xE3 l\\u1EDBp h\\u1ECDc: (*)\"));\n\nvar _ref7 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"name\"\n}, void 0, _jsx(\"b\", {}, void 0, \"T\\xEAn l\\u1EDBp h\\u1ECDc: (*)\"));\n\nvar _ref8 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"classRoom\"\n}, void 0, _jsx(\"b\", {}, void 0, \"Ph\\xF2ng h\\u1ECDc:\"));\n\nvar _ref9 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"openDay\"\n}, void 0, _jsx(\"b\", {}, void 0, \"Ng\\xE0y m\\u1EDF l\\u1EDBp (*):\"));\n\nvar _ref10 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"closeDay\"\n}, void 0, _jsx(\"b\", {}, void 0, \"Ng\\xE0y \\u0111\\xF3ng l\\u1EDBp (*):\"));\n\nvar _ref11 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"describe\"\n}, void 0, _jsx(\"b\", {}, void 0, \"M\\xF4 t\\u1EA3 ng\\u1EAFn:\"));\n\nvar _ref12 =\n/*#__PURE__*/\n_jsx(\"br\", {});\n\nvar _ref13 =\n/*#__PURE__*/\n_jsx(\"label\", {\n  htmlFor: \"status\"\n}, void 0, _jsx(\"b\", {}, void 0, \"Tr\\u1EA1ng th\\xE1i:\"));\n\nvar _ref14 =\n/*#__PURE__*/\n_jsx(\"option\", {\n  value: true\n}, void 0, \"--- M\\u1EDE L\\u1EDAP H\\u1ECCC ---\");\n\nvar _ref15 =\n/*#__PURE__*/\n_jsx(\"option\", {\n  value: false\n}, void 0, \"--- \\u0110\\xD3NG L\\u1EDAP H\\u1ECCC ---\");\n\nvar FormAddDetail =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FormAddDetail, _Component);\n\n  function FormAddDetail(props) {\n    var _this;\n\n    _classCallCheck(this, FormAddDetail);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormAddDetail).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleChange\", function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (event) {\n      event.preventDefault();\n\n      _this.setState({\n        open: true\n      });\n\n      var check = _this.isErrors(_this.state);\n\n      if (check) {\n        var _this$state = _this.state,\n            name = _this$state.name,\n            classCode = _this$state.classCode,\n            openDay = _this$state.openDay,\n            closeDay = _this$state.closeDay,\n            describe = _this$state.describe,\n            classRoom = _this$state.classRoom,\n            status = _this$state.status,\n            courseId = _this$state.courseId;\n        var formData = {\n          name: name,\n          classCode: classCode,\n          openDay: openDay,\n          closeDay: closeDay,\n          describe: describe,\n          classRoom: classRoom,\n          status: status,\n          courseId: courseId\n        };\n\n        _this.props.createNewClass(formData);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isErrors\", function (datas) {\n      var name = '';\n      var openDay = '';\n      var closeDay = '';\n      var day = '';\n\n      if (datas.name === '') {\n        name = 'Tên lớp học không được để trống!';\n      } else if (datas.name.length < 5 || datas.name.length > 100) {\n        name = \"Độ dài tên lớp học lớn hơn hoặc bằng 5 ký tự và bé hơn hoặc bằng 100 ký tự!\";\n      } else {\n        name = '';\n      }\n\n      if (datas.openDay === null) {\n        openDay = 'Ngày mở lớp không được để trống!';\n      } else {\n        openDay = '';\n      }\n\n      if (datas.closeDay === null) {\n        closeDay = 'Ngày đóng lớp không được để trống!';\n      } else {\n        closeDay = '';\n      }\n\n      var op = Date.parse(datas.openDay);\n      var cl = Date.parse(datas.closeDay);\n\n      if (cl - op <= 0) {\n        day = 'Ngày mở đóng lớp phải lớn hơn ngày mở lớp!';\n      } else {\n        day = '';\n      }\n\n      _this.setState({\n        errors: {\n          name: name,\n          openDay: openDay,\n          closeDay: closeDay,\n          day: day\n        }\n      });\n\n      if (name === '' && openDay === '' && closeDay === '' && day === '') {\n        return true;\n      }\n\n      return false;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleClose\", function () {\n      _this.setState({\n        open: false\n      });\n    });\n\n    _this.state = {\n      name: '',\n      classCode: '',\n      classRoom: '',\n      openDay: null,\n      closeDay: null,\n      describe: '',\n      status: true,\n      yearId: 0,\n      courseId: 0,\n      errors: {\n        name: '',\n        openDay: '',\n        closeDay: '',\n        day: ''\n      },\n      open: false\n    };\n    return _this;\n  }\n\n  _createClass(FormAddDetail, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var data = this.props.data;\n      var classCode = data.nameCourse.split('-');\n      var classString = classCode[0] + classCode[1];\n      var generateString = randomstring.generate(5);\n      this.setState({\n        name: data.name,\n        yearId: data.year,\n        courseId: data.course,\n        classCode: (classString + generateString).toUpperCase()\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.setYearAndCourse({\n        name: '',\n        year: 0,\n        course: 0,\n        nameYear: '',\n        nameCourse: ''\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          status = _this$props.status;\n      var _this$state2 = this.state,\n          errors = _this$state2.errors,\n          name = _this$state2.name,\n          classCode = _this$state2.classCode;\n      var isShowMessageBeforeSubit = errors.name !== '' || errors.openDay !== '' || errors.closeDay !== '' || errors.day !== '';\n      var isShowMessageFailueAfterSubit = !status.progress && status.status === 'ADD_FAILED' && status.data.status === 400 && status.data.response;\n      var isShowMessageSuccessAfterSubit = !status.progress && status.status === 'ADD_SUCCESS';\n\n      var alert = function alert() {\n        if (isShowMessageBeforeSubit || !isShowMessageBeforeSubit && isShowMessageFailueAfterSubit) {\n          return _jsx(Snackbar, {\n            anchorOrigin: {\n              vertical: 'top',\n              horizontal: 'right'\n            },\n            open: _this2.state.open && (isShowMessageBeforeSubit || isShowMessageFailueAfterSubit),\n            autoHideDuration: 6000,\n            ContentProps: {\n              'aria-describedby': 'message-id'\n            }\n          }, void 0, _jsx(SnackbarContent, {\n            className: classes.error,\n            message: _jsx(\"span\", {}, void 0, _jsx(\"ul\", {}, void 0, errors.name !== '' ? _jsx(\"li\", {}, void 0, errors.name) : '', errors.openDay !== '' ? _jsx(\"li\", {}, void 0, errors.openDay) : '', errors.closeDay !== '' ? _jsx(\"li\", {}, void 0, errors.closeDay) : '', errors.day !== '' ? _jsx(\"li\", {}, void 0, errors.day) : '', !isShowMessageBeforeSubit && status.data.status === 400 && status.data.response ? _jsx(\"li\", {}, void 0, status.data.response.createClassFailed ? status.data.response.createClassFailed : 'Tạo năm học thất bại!') : '')),\n            action: [_jsx(\"span\", {}, void 0, _jsx(IconButton, {\n              \"aria-label\": \"Close\",\n              color: \"inherit\",\n              className: classes.close,\n              onClick: _this2.handleClose\n            }, \"close\", _ref))]\n          }));\n        } else if (!isShowMessageBeforeSubit && isShowMessageSuccessAfterSubit) {\n          return _jsx(Snackbar, {\n            anchorOrigin: {\n              vertical: 'top',\n              horizontal: 'right'\n            },\n            open: _this2.state.open && !isShowMessageBeforeSubit,\n            autoHideDuration: 6000,\n            ContentProps: {\n              'aria-describedby': 'message-id'\n            }\n          }, void 0, _jsx(SnackbarContent, {\n            className: classes.success,\n            message: _jsx(\"span\", {}, void 0, _jsx(\"ul\", {}, void 0, !isShowMessageBeforeSubit && isShowMessageSuccessAfterSubit ? _ref2 : '')),\n            action: [_jsx(\"span\", {}, void 0, _jsx(IconButton, {\n              \"aria-label\": \"Close\",\n              color: \"inherit\",\n              className: classes.close,\n              onClick: _this2.handleClose\n            }, \"close\", _ref3))]\n          }));\n        }\n      };\n\n      return _jsx(DocumentTitle, {\n        title: \".:Chi ti\\u1EBFt l\\u1EDBp h\\u1ECDc:.\"\n      }, void 0, _jsx(\"div\", {\n        className: \"\".concat(styles.formAddNewYears)\n      }, void 0, alert(), _ref4, _ref5, _jsx(\"div\", {\n        className: \"contentForm\",\n        style: {\n          display: 'block'\n        }\n      }, void 0, _jsx(\"form\", {\n        onSubmit: this.handleSubmit\n      }, void 0, _jsx(\"div\", {\n        className: \"row\"\n      }, void 0, _jsx(\"div\", {\n        className: \"col-md-2\"\n      }, void 0, _ref6, _jsx(\"input\", {\n        id: \"classCode\",\n        type: \"text\",\n        disabled: true,\n        placeholder: \"M\\xE3 l\\u1EDBp\",\n        className: \"\".concat(styles.hide),\n        defaultValue: classCode\n      })), _jsx(\"div\", {\n        className: \"col-md-4\"\n      }, void 0, _ref7, _jsx(\"input\", {\n        id: \"name\",\n        type: \"text\",\n        minLength: \"5\",\n        maxLength: \"100\",\n        onChange: this.handleChange,\n        placeholder: \"VD: N\\u0103m h\\u1ECDc 2019\",\n        name: \"name\",\n        defaultValue: name,\n        required: true\n      })), _jsx(\"div\", {\n        className: \"col-md-6\"\n      }, void 0, _ref8, _jsx(\"input\", {\n        id: \"classRoom\",\n        type: \"text\",\n        onChange: this.handleChange,\n        placeholder: \"VD: 201-TA1\",\n        name: \"classRoom\"\n      }))), _jsx(\"div\", {\n        className: \"row\"\n      }, void 0, _jsx(\"div\", {\n        className: \"col-md-6\"\n      }, void 0, _ref9, _jsx(\"input\", {\n        type: \"date\",\n        id: \"openDay\",\n        onChange: this.handleChange,\n        placeholder: \"VD: 09/05/2019\",\n        name: \"openDay\",\n        required: true\n      })), _jsx(\"div\", {\n        className: \"col-md-6\"\n      }, void 0, _ref10, _jsx(\"input\", {\n        type: \"date\",\n        id: \"closeDay\",\n        onChange: this.handleChange,\n        placeholder: \"VD: 09/05/2019\",\n        name: \"closeDay\",\n        required: true\n      }))), _ref11, _jsx(\"textarea\", {\n        id: \"describe\",\n        name: \"describe\",\n        rows: \"10\",\n        placeholder: \"M\\xF4 t\\u1EA3 ng\\u1EAFn...\",\n        onChange: this.handleChange\n      }), _ref12, _ref13, _jsx(\"select\", {\n        name: \"status\",\n        id: \"status\",\n        onChange: this.handleChange,\n        required: true\n      }, void 0, _ref14, _ref15), _jsx(\"div\", {\n        className: \"clearfix\"\n      }, void 0, _jsx(Button, {\n        variant: \"contained\",\n        type: \"submit\",\n        color: \"primary\",\n        className: \"reset-button \".concat(classes.button)\n      }, void 0, \"TH\\xCAM M\\u1EDAI\", _jsx(AddIcon, {\n        className: classes.rightIcon\n      })), status.progress ? _jsx(\"span\", {\n        style: {\n          marginLeft: 5,\n          marginTop: 3\n        }\n      }, void 0, _jsx(\"i\", {\n        class: \"fa fa-spinner fa-pulse fa-3x fa-fw\",\n        style: {\n          fontSize: 30\n        }\n      })) : '')))));\n    }\n  }]);\n\n  return FormAddDetail;\n}(Component);\n\nFormAddDetail.propTypes = {\n  classes: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n  createNewClass: PropTypes.func.isRequired,\n  status: PropTypes.object.isRequired\n};\nFormAddDetail.defaultProps = {\n  status: {\n    progress: false,\n    status: '',\n    data: {}\n  },\n  data: {\n    name: '',\n    year: '',\n    course: ''\n  }\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    status: state.class.status\n  };\n};\n\nvar mapDispatchToProps = {\n  createNewClass: classOperations.doCreateNewClass\n};\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(style)(FormAddDetail)));",{"version":3,"sources":["E:\\QuanLyDaoTao\\Front-end\\src\\app\\scenes\\pages\\ManageClass\\components\\Class\\components\\FormAddDetail\\FormAddDetail.jsx"],"names":["React","Component","styles","DocumentTitle","Button","DeleteIcon","PropTypes","Prompt","withRouter","withStyles","amber","AddIcon","Snackbar","IconButton","CloseIcon","SnackbarContent","PersonAddIcon","connect","classOperations","randomstring","style","theme","snackbar","margin","spacing","unit","close","padding","error","backgroundColor","error1","palette","dark","success","button","fontSize","leftIcon","marginRight","rightIcon","marginLeft","iconSmall","FormAddDetail","props","event","setState","target","name","value","preventDefault","open","check","isErrors","state","classCode","openDay","closeDay","describe","classRoom","status","courseId","formData","createNewClass","datas","day","length","op","Date","parse","cl","errors","yearId","data","nameCourse","split","classString","generateString","generate","year","course","toUpperCase","setYearAndCourse","nameYear","classes","isShowMessageBeforeSubit","isShowMessageFailueAfterSubit","progress","response","isShowMessageSuccessAfterSubit","alert","vertical","horizontal","createClassFailed","handleClose","formAddNewYears","display","handleSubmit","hide","handleChange","marginTop","propTypes","object","isRequired","func","defaultProps","mapStateToProps","class","mapDispatchToProps","doCreateNewClass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,OAAOC,aAAP,MAA0B,sBAA1B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,KAAP,MAAkB,gCAAlB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,eAAP,MAA4B,mCAA5B;AACA,OAAOC,aAAP,MAA0B,8BAA1B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,eAAT,QAAgC,wCAAhC;AACA,OAAOC,YAAP,MAAyB,cAAzB;;AAEA,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAAAC,KAAK;AAAA,SAAK;AACpBC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAcC;AADhB,KADU;AAIpBC,IAAAA,KAAK,EAAE;AACHC,MAAAA,OAAO,EAAEN,KAAK,CAACG,OAAN,CAAcC,IAAd,GAAqB;AAD3B,KAJa;AAOpBG,IAAAA,KAAK,EAAE;AACHC,MAAAA,eAAe,EAAEnB,KAAK,CAAC,GAAD;AADnB,KAPa;AAUpBoB,IAAAA,MAAM,EAAE;AACJD,MAAAA,eAAe,EAAER,KAAK,CAACU,OAAN,CAAcH,KAAd,CAAoBI;AADjC,KAVY;AAapBC,IAAAA,OAAO,EAAE;AACLJ,MAAAA,eAAe,EAAE;AADZ,KAbW;AAgBpBK,IAAAA,MAAM,EAAE;AACJX,MAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAcC,IADlB;AAEJU,MAAAA,QAAQ,EAAE;AAFN,KAhBY;AAoBpBC,IAAAA,QAAQ,EAAE;AACNC,MAAAA,WAAW,EAAEhB,KAAK,CAACG,OAAN,CAAcC;AADrB,KApBU;AAuBpBa,IAAAA,SAAS,EAAE;AACPC,MAAAA,UAAU,EAAElB,KAAK,CAACG,OAAN,CAAcC;AADnB,KAvBS;AA0BpBe,IAAAA,SAAS,EAAE;AACPL,MAAAA,QAAQ,EAAE;AADH;AA1BS,GAAL;AAAA,CAAnB;;;;AAkMwC,KAAC,SAAD,K;;;;AAyBiE,qE;;;;AAajE,KAAC,SAAD,K;;;;AAapB;AAAI,EAAA,SAAS,EAAC;AAAd,0D;;;;AACA,wBACI,wBAAK,qCAAL,CADJ,EAEI;AAAI,EAAA,SAAS,EAAC;AAAd,WACI,wFAAoC,4BAApC,qDADJ,EAEI,gIAFJ,EAGI,0EAA4B,wCAA5B,8BAAqD,2CAArD,MAHJ,EAII,+GAJJ,CAFJ,C;;;;AAagB;AAAO,EAAA,OAAO,EAAC;AAAf,WAA2B,qDAA3B,C;;;;AAIA;AAAO,EAAA,OAAO,EAAC;AAAf,WAAsB,sDAAtB,C;;;;AAIA;AAAO,EAAA,OAAO,EAAC;AAAf,WAA2B,2CAA3B,C;;;;AAMA;AAAO,EAAA,OAAO,EAAC;AAAf,WAAyB,sDAAzB,C;;;;AAIA;AAAO,EAAA,OAAO,EAAC;AAAf,WAA0B,2DAA1B,C;;;;AAIR;AAAO,EAAA,OAAO,EAAC;AAAf,WAA0B,iDAA1B,C;;;;AAEA,c;;;;AACA;AAAO,EAAA,OAAO,EAAC;AAAf,WAAwB,4CAAxB,C;;;;AAEI;AAAQ,EAAA,KAAK,EAAE;AAAf,+C;;;;AACA;AAAQ,EAAA,KAAK,EAAE;AAAf,oD;;IAhQ1BM,a;;;;;AACF,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,uFAAMA,KAAN;;AADe,mEAsCJ,UAAAC,KAAK,EAAI;AACpB,YAAKC,QAAL,qBAAiBD,KAAK,CAACE,MAAN,CAAaC,IAA9B,EAAqCH,KAAK,CAACE,MAAN,CAAaE,KAAlD;AACH,KAxCkB;;AAAA,mEA0CJ,UAAAJ,KAAK,EAAI;AACpBA,MAAAA,KAAK,CAACK,cAAN;;AACA,YAAKJ,QAAL,CAAc;AAAEK,QAAAA,IAAI,EAAE;AAAR,OAAd;;AACA,UAAMC,KAAK,GAAG,MAAKC,QAAL,CAAc,MAAKC,KAAnB,CAAd;;AACA,UAAIF,KAAJ,EAAW;AAAA,0BAGH,MAAKE,KAHF;AAAA,YAEHN,IAFG,eAEHA,IAFG;AAAA,YAEGO,SAFH,eAEGA,SAFH;AAAA,YAEcC,OAFd,eAEcA,OAFd;AAAA,YAEuBC,QAFvB,eAEuBA,QAFvB;AAAA,YAEiCC,QAFjC,eAEiCA,QAFjC;AAAA,YAE2CC,SAF3C,eAE2CA,SAF3C;AAAA,YAEsDC,MAFtD,eAEsDA,MAFtD;AAAA,YAE8DC,QAF9D,eAE8DA,QAF9D;AAIP,YAAMC,QAAQ,GAAG;AACbd,UAAAA,IAAI,EAAJA,IADa;AACPO,UAAAA,SAAS,EAATA,SADO;AACIC,UAAAA,OAAO,EAAPA,OADJ;AACaC,UAAAA,QAAQ,EAARA,QADb;AACuBC,UAAAA,QAAQ,EAARA,QADvB;AACiCC,UAAAA,SAAS,EAATA,SADjC;AAC4CC,UAAAA,MAAM,EAANA,MAD5C;AACoDC,UAAAA,QAAQ,EAARA;AADpD,SAAjB;;AAGA,cAAKjB,KAAL,CAAWmB,cAAX,CAA0BD,QAA1B;AACH;AACJ,KAvDkB;;AAAA,+DAyDR,UAAAE,KAAK,EAAI;AAChB,UAAIhB,IAAI,GAAG,EAAX;AACA,UAAIQ,OAAO,GAAG,EAAd;AACA,UAAIC,QAAQ,GAAG,EAAf;AACA,UAAIQ,GAAG,GAAG,EAAV;;AAEA,UAAID,KAAK,CAAChB,IAAN,KAAe,EAAnB,EAAuB;AACnBA,QAAAA,IAAI,GAAG,kCAAP;AACH,OAFD,MAEO,IAAIgB,KAAK,CAAChB,IAAN,CAAWkB,MAAX,GAAoB,CAApB,IAAyBF,KAAK,CAAChB,IAAN,CAAWkB,MAAX,GAAoB,GAAjD,EAAsD;AACzDlB,QAAAA,IAAI,GAAG,6EAAP;AACH,OAFM,MAEA;AACHA,QAAAA,IAAI,GAAG,EAAP;AACH;;AAED,UAAIgB,KAAK,CAACR,OAAN,KAAkB,IAAtB,EAA4B;AACxBA,QAAAA,OAAO,GAAG,kCAAV;AACH,OAFD,MAEO;AACHA,QAAAA,OAAO,GAAG,EAAV;AACH;;AAED,UAAIQ,KAAK,CAACP,QAAN,KAAmB,IAAvB,EAA6B;AACzBA,QAAAA,QAAQ,GAAG,oCAAX;AACH,OAFD,MAEO;AACHA,QAAAA,QAAQ,GAAG,EAAX;AACH;;AAED,UAAMU,EAAE,GAAGC,IAAI,CAACC,KAAL,CAAWL,KAAK,CAACR,OAAjB,CAAX;AACA,UAAMc,EAAE,GAAGF,IAAI,CAACC,KAAL,CAAWL,KAAK,CAACP,QAAjB,CAAX;;AAEA,UAAKa,EAAE,GAAGH,EAAL,IAAW,CAAhB,EAAoB;AAChBF,QAAAA,GAAG,GAAG,4CAAN;AACH,OAFD,MAEO;AACHA,QAAAA,GAAG,GAAG,EAAN;AACH;;AAED,YAAKnB,QAAL,CAAc;AAAEyB,QAAAA,MAAM,EAAE;AAAEvB,UAAAA,IAAI,EAAJA,IAAF;AAAQQ,UAAAA,OAAO,EAAPA,OAAR;AAAiBC,UAAAA,QAAQ,EAARA,QAAjB;AAA2BQ,UAAAA,GAAG,EAAHA;AAA3B;AAAV,OAAd;;AAEA,UAAIjB,IAAI,KAAK,EAAT,IACGQ,OAAO,KAAK,EADf,IAEGC,QAAQ,KAAK,EAFhB,IAEsBQ,GAAG,KAAK,EAFlC,EAEsC;AAClC,eAAO,IAAP;AACH;;AACD,aAAO,KAAP;AACH,KApGkB;;AAAA,kEAsGL,YAAM;AAChB,YAAKnB,QAAL,CAAc;AAAEK,QAAAA,IAAI,EAAE;AAAR,OAAd;AACH,KAxGkB;;AAEf,UAAKG,KAAL,GAAa;AACTN,MAAAA,IAAI,EAAE,EADG;AAETO,MAAAA,SAAS,EAAE,EAFF;AAGTI,MAAAA,SAAS,EAAE,EAHF;AAITH,MAAAA,OAAO,EAAE,IAJA;AAKTC,MAAAA,QAAQ,EAAE,IALD;AAMTC,MAAAA,QAAQ,EAAE,EAND;AAOTE,MAAAA,MAAM,EAAE,IAPC;AAQTY,MAAAA,MAAM,EAAE,CARC;AASTX,MAAAA,QAAQ,EAAE,CATD;AAUTU,MAAAA,MAAM,EAAE;AACJvB,QAAAA,IAAI,EAAE,EADF;AAEJQ,QAAAA,OAAO,EAAE,EAFL;AAGJC,QAAAA,QAAQ,EAAE,EAHN;AAIJQ,QAAAA,GAAG,EAAE;AAJD,OAVC;AAgBTd,MAAAA,IAAI,EAAE;AAhBG,KAAb;AAFe;AAoBlB;;;;wCAEmB;AAAA,UACRsB,IADQ,GACC,KAAK7B,KADN,CACR6B,IADQ;AAEhB,UAAIlB,SAAS,GAAGkB,IAAI,CAACC,UAAL,CAAgBC,KAAhB,CAAsB,GAAtB,CAAhB;AACA,UAAIC,WAAW,GAAGrB,SAAS,CAAC,CAAD,CAAT,GAAaA,SAAS,CAAC,CAAD,CAAxC;AACA,UAAIsB,cAAc,GAAGxD,YAAY,CAACyD,QAAb,CAAsB,CAAtB,CAArB;AACA,WAAKhC,QAAL,CAAc;AACVE,QAAAA,IAAI,EAAEyB,IAAI,CAACzB,IADD;AAEVwB,QAAAA,MAAM,EAAEC,IAAI,CAACM,IAFH;AAGVlB,QAAAA,QAAQ,EAAEY,IAAI,CAACO,MAHL;AAIVzB,QAAAA,SAAS,EAAE,CAAEqB,WAAW,GAAGC,cAAhB,EAAiCI,WAAjC;AAJD,OAAd;AAMH;;;2CACsB;AACnB,WAAKrC,KAAL,CAAWsC,gBAAX,CAA4B;AAAElC,QAAAA,IAAI,EAAE,EAAR;AAAY+B,QAAAA,IAAI,EAAE,CAAlB;AAAqBC,QAAAA,MAAM,EAAE,CAA7B;AAAgCG,QAAAA,QAAQ,EAAE,EAA1C;AAA8CT,QAAAA,UAAU,EAAE;AAA1D,OAA5B;AACH;;;6BAsEQ;AAAA;;AAAA,wBACuB,KAAK9B,KAD5B;AAAA,UACGwC,OADH,eACGA,OADH;AAAA,UACYxB,MADZ,eACYA,MADZ;AAAA,yBAE+B,KAAKN,KAFpC;AAAA,UAEGiB,MAFH,gBAEGA,MAFH;AAAA,UAEWvB,IAFX,gBAEWA,IAFX;AAAA,UAEiBO,SAFjB,gBAEiBA,SAFjB;AAGL,UAAI8B,wBAAwB,GAAGd,MAAM,CAACvB,IAAP,KAAgB,EAAhB,IACxBuB,MAAM,CAACf,OAAP,KAAmB,EADK,IAExBe,MAAM,CAACd,QAAP,KAAoB,EAFI,IAGxBc,MAAM,CAACN,GAAP,KAAe,EAHtB;AAIA,UAAIqB,6BAA6B,GAAG,CAAC1B,MAAM,CAAC2B,QAAR,IAC7B3B,MAAM,CAACA,MAAP,KAAkB,YADW,IAE7BA,MAAM,CAACa,IAAP,CAAYb,MAAZ,KAAuB,GAFM,IAG7BA,MAAM,CAACa,IAAP,CAAYe,QAHnB;AAIA,UAAIC,8BAA8B,GAAG,CAAC7B,MAAM,CAAC2B,QAAR,IAC9B3B,MAAM,CAACA,MAAP,KAAkB,aADzB;;AAGA,UAAI8B,KAAK,GAAG,SAARA,KAAQ,GAAM;AACd,YAAIL,wBAAwB,IACpB,CAACA,wBAAD,IACDC,6BAFP,EAGE;AACE,iBACI,KAAC,QAAD;AACI,YAAA,YAAY,EAAE;AACVK,cAAAA,QAAQ,EAAE,KADA;AAEVC,cAAAA,UAAU,EAAE;AAFF,aADlB;AAKI,YAAA,IAAI,EACA,MAAI,CAACtC,KAAL,CAAWH,IAAX,KAAoBkC,wBAAwB,IAAIC,6BAAhD,CANR;AAQI,YAAA,gBAAgB,EAAE,IARtB;AASI,YAAA,YAAY,EAAE;AACV,kCAAoB;AADV;AATlB,qBAaI,KAAC,eAAD;AACI,YAAA,SAAS,EAAEF,OAAO,CAACtD,KADvB;AAEI,YAAA,OAAO,EACH,yBACI,uBACKyC,MAAM,CAACvB,IAAP,KAAgB,EAAhB,GAAqB,uBAAKuB,MAAM,CAACvB,IAAZ,CAArB,GAA8C,EADnD,EAEKuB,MAAM,CAACf,OAAP,KAAmB,EAAnB,GAAwB,uBAAKe,MAAM,CAACf,OAAZ,CAAxB,GAAqD,EAF1D,EAGKe,MAAM,CAACd,QAAP,KAAqB,EAArB,GAA0B,uBAAKc,MAAM,CAACd,QAAZ,CAA1B,GAAuD,EAH5D,EAIKc,MAAM,CAACN,GAAP,KAAe,EAAf,GAAoB,uBAAKM,MAAM,CAACN,GAAZ,CAApB,GAA4C,EAJjD,EAKM,CAACoB,wBAAD,IAA6BzB,MAAM,CAACa,IAAP,CAAYb,MAAZ,KAAuB,GAApD,IAA2DA,MAAM,CAACa,IAAP,CAAYe,QAAxE,GACG,uBAAK5B,MAAM,CAACa,IAAP,CAAYe,QAAZ,CAAqBK,iBAArB,GAAyCjC,MAAM,CAACa,IAAP,CAAYe,QAAZ,CAAqBK,iBAA9D,GAAkF,uBAAvF,CADH,GAC0H,EAN/H,CADJ,CAHR;AAcI,YAAA,MAAM,EAAE,CACJ,yBACI,KAAC,UAAD;AAEI,4BAAW,OAFf;AAGI,cAAA,KAAK,EAAC,SAHV;AAII,cAAA,SAAS,EAAET,OAAO,CAACxD,KAJvB;AAKI,cAAA,OAAO,EAAE,MAAI,CAACkE;AALlB,eACQ,OADR,OADJ,CADI;AAdZ,YAbJ,CADJ;AA4CH,SAhDD,MAgDO,IAAI,CAACT,wBAAD,IAA6BI,8BAAjC,EAAiE;AACpE,iBACI,KAAC,QAAD;AACI,YAAA,YAAY,EAAE;AACVE,cAAAA,QAAQ,EAAE,KADA;AAEVC,cAAAA,UAAU,EAAE;AAFF,aADlB;AAKI,YAAA,IAAI,EAAE,MAAI,CAACtC,KAAL,CAAWH,IAAX,IAAmB,CAACkC,wBAL9B;AAMI,YAAA,gBAAgB,EAAE,IANtB;AAOI,YAAA,YAAY,EAAE;AACV,kCAAoB;AADV;AAPlB,qBAWI,KAAC,eAAD;AACI,YAAA,SAAS,EAAED,OAAO,CAACjD,OADvB;AAEI,YAAA,OAAO,EACH,yBACI,uBACM,CAACkD,wBAAD,IAA6BI,8BAA9B,WAAoG,EADzG,CADJ,CAHR;AASI,YAAA,MAAM,EAAE,CACJ,yBACI,KAAC,UAAD;AAEI,4BAAW,OAFf;AAGI,cAAA,KAAK,EAAC,SAHV;AAII,cAAA,SAAS,EAAEL,OAAO,CAACxD,KAJvB;AAKI,cAAA,OAAO,EAAE,MAAI,CAACkE;AALlB,eACQ,OADR,QADJ,CADI;AATZ,YAXJ,CADJ;AAqCH;AACJ,OAxFD;;AAyFA,aACI,KAAC,aAAD;AAAe,QAAA,KAAK,EAAC;AAArB,iBACI;AAAK,QAAA,SAAS,YAAK1F,MAAM,CAAC2F,eAAZ;AAAd,iBACKL,KAAK,EADV,gBAYI;AAAK,QAAA,SAAS,EAAC,aAAf;AAA6B,QAAA,KAAK,EAAE;AAAEM,UAAAA,OAAO,EAAE;AAAX;AAApC,iBACI;AAAM,QAAA,QAAQ,EAAE,KAAKC;AAArB,iBACI;AAAK,QAAA,SAAS,EAAC;AAAf,iBACI;AAAK,QAAA,SAAS,EAAC;AAAf,wBAEI;AAAO,QAAA,EAAE,EAAC,WAAV;AAAsB,QAAA,IAAI,EAAC,MAA3B;AAAkC,QAAA,QAAQ,MAA1C;AAA2C,QAAA,WAAW,EAAC,gBAAvD;AAAgE,QAAA,SAAS,YAAK7F,MAAM,CAAC8F,IAAZ,CAAzE;AAA6F,QAAA,YAAY,EAAE3C;AAA3G,QAFJ,CADJ,EAKI;AAAK,QAAA,SAAS,EAAC;AAAf,wBAEI;AAAO,QAAA,EAAE,EAAC,MAAV;AAAiB,QAAA,IAAI,EAAC,MAAtB;AAA6B,QAAA,SAAS,EAAC,GAAvC;AAA2C,QAAA,SAAS,EAAC,KAArD;AAA2D,QAAA,QAAQ,EAAE,KAAK4C,YAA1E;AAAwF,QAAA,WAAW,EAAC,4BAApG;AAAuH,QAAA,IAAI,EAAC,MAA5H;AAAmI,QAAA,YAAY,EAAEnD,IAAjJ;AAAuJ,QAAA,QAAQ;AAA/J,QAFJ,CALJ,EASI;AAAK,QAAA,SAAS,EAAC;AAAf,wBAEI;AAAO,QAAA,EAAE,EAAC,WAAV;AAAsB,QAAA,IAAI,EAAC,MAA3B;AAAkC,QAAA,QAAQ,EAAE,KAAKmD,YAAjD;AAA+D,QAAA,WAAW,EAAC,aAA3E;AAAyF,QAAA,IAAI,EAAC;AAA9F,QAFJ,CATJ,CADJ,EAeI;AAAK,QAAA,SAAS,EAAC;AAAf,iBACI;AAAK,QAAA,SAAS,EAAC;AAAf,wBAEI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,SAAtB;AAAgC,QAAA,QAAQ,EAAE,KAAKA,YAA/C;AAA6D,QAAA,WAAW,EAAC,gBAAzE;AAA0F,QAAA,IAAI,EAAC,SAA/F;AAAyG,QAAA,QAAQ;AAAjH,QAFJ,CADJ,EAKI;AAAK,QAAA,SAAS,EAAC;AAAf,yBAEI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,EAAE,EAAC,UAAtB;AAAiC,QAAA,QAAQ,EAAE,KAAKA,YAAhD;AAA8D,QAAA,WAAW,EAAC,gBAA1E;AAA2F,QAAA,IAAI,EAAC,UAAhG;AAA2G,QAAA,QAAQ;AAAnH,QAFJ,CALJ,CAfJ,UA0BI;AAAU,QAAA,EAAE,EAAC,UAAb;AAAwB,QAAA,IAAI,EAAC,UAA7B;AAAwC,QAAA,IAAI,EAAC,IAA7C;AAAkD,QAAA,WAAW,EAAC,4BAA9D;AAA8E,QAAA,QAAQ,EAAE,KAAKA;AAA7F,QA1BJ,kBA6BI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,EAAE,EAAC,QAAzB;AAAkC,QAAA,QAAQ,EAAE,KAAKA,YAAjD;AAA+D,QAAA,QAAQ;AAAvE,gCA7BJ,EAiCI;AAAK,QAAA,SAAS,EAAC;AAAf,iBACI,KAAC,MAAD;AAAQ,QAAA,OAAO,EAAC,WAAhB;AAA4B,QAAA,IAAI,EAAC,QAAjC;AAA0C,QAAA,KAAK,EAAC,SAAhD;AAA0D,QAAA,SAAS,yBAAkBf,OAAO,CAAChD,MAA1B;AAAnE,qCAEQ,KAAC,OAAD;AAAS,QAAA,SAAS,EAAEgD,OAAO,CAAC5C;AAA5B,QAFR,CADJ,EAKKoB,MAAM,CAAC2B,QAAP,GAAkB;AAAM,QAAA,KAAK,EAAE;AAAE9C,UAAAA,UAAU,EAAE,CAAd;AAAiB2D,UAAAA,SAAS,EAAE;AAA5B;AAAb,iBAA8C;AAAG,QAAA,KAAK,EAAC,oCAAT;AAA8C,QAAA,KAAK,EAAE;AAAE/D,UAAAA,QAAQ,EAAE;AAAZ;AAArD,QAA9C,CAAlB,GAAqJ,EAL1J,CAjCJ,CADJ,CAZJ,CADJ,CADJ;AA4DH;;;;EA9QuBlC,S;;AAiR5BwC,aAAa,CAAC0D,SAAd,GAA0B;AACtBjB,EAAAA,OAAO,EAAE5E,SAAS,CAAC8F,MAAV,CAAiBC,UADJ;AAEtB9B,EAAAA,IAAI,EAAEjE,SAAS,CAAC8F,MAAV,CAAiBC,UAFD;AAGtBxC,EAAAA,cAAc,EAAEvD,SAAS,CAACgG,IAAV,CAAeD,UAHT;AAItB3C,EAAAA,MAAM,EAAEpD,SAAS,CAAC8F,MAAV,CAAiBC;AAJH,CAA1B;AAOA5D,aAAa,CAAC8D,YAAd,GAA6B;AACzB7C,EAAAA,MAAM,EAAE;AAAE2B,IAAAA,QAAQ,EAAE,KAAZ;AAAmB3B,IAAAA,MAAM,EAAE,EAA3B;AAA+Ba,IAAAA,IAAI,EAAE;AAArC,GADiB;AAEzBA,EAAAA,IAAI,EAAE;AAAEzB,IAAAA,IAAI,EAAE,EAAR;AAAY+B,IAAAA,IAAI,EAAE,EAAlB;AAAsBC,IAAAA,MAAM,EAAE;AAA9B;AAFmB,CAA7B;;AAKA,IAAM0B,eAAe,GAAG,SAAlBA,eAAkB,CAAApD,KAAK;AAAA,SAAK;AAC9BM,IAAAA,MAAM,EAAEN,KAAK,CAACqD,KAAN,CAAY/C;AADU,GAAL;AAAA,CAA7B;;AAIA,IAAMgD,kBAAkB,GAAG;AACvB7C,EAAAA,cAAc,EAAE3C,eAAe,CAACyF;AADT,CAA3B;AAIA,eAAenG,UAAU,CAACS,OAAO,CAACuF,eAAD,EAAkBE,kBAAlB,CAAP,CAA6CjG,UAAU,CAACW,KAAD,CAAV,CAAkBqB,aAAlB,CAA7C,CAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport styles from './styles.css';\r\nimport DocumentTitle from 'react-document-title';\r\nimport Button from '@material-ui/core/Button';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport PropTypes from 'prop-types';\r\nimport { Prompt } from 'react-router-dom';\r\nimport { withRouter } from 'react-router';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport amber from '@material-ui/core/colors/amber';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\r\nimport { connect } from 'react-redux';\r\nimport { classOperations } from '../../../../../../../state/ducks/class';\r\nimport randomstring from 'randomstring';\r\n\r\nconst style = theme => ({\r\n    snackbar: {\r\n        margin: theme.spacing.unit,\r\n    },\r\n    close: {\r\n        padding: theme.spacing.unit / 2,\r\n    },\r\n    error: {\r\n        backgroundColor: amber[700],\r\n    },\r\n    error1: {\r\n        backgroundColor: theme.palette.error.dark,\r\n    },\r\n    success: {\r\n        backgroundColor: '#338ef9',\r\n    },\r\n    button: {\r\n        margin: theme.spacing.unit,\r\n        fontSize: 13\r\n    },\r\n    leftIcon: {\r\n        marginRight: theme.spacing.unit,\r\n    },\r\n    rightIcon: {\r\n        marginLeft: theme.spacing.unit,\r\n    },\r\n    iconSmall: {\r\n        fontSize: 20,\r\n    },\r\n});\r\n\r\nclass FormAddDetail extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: '', \r\n            classCode: '',\r\n            classRoom: '',\r\n            openDay: null, \r\n            closeDay: null, \r\n            describe: '',\r\n            status: true,\r\n            yearId: 0,\r\n            courseId: 0,\r\n            errors: {\r\n                name: '',\r\n                openDay: '',\r\n                closeDay: '',\r\n                day: ''\r\n            },\r\n            open: false,\r\n        }\r\n    }\r\n    \r\n    componentDidMount() {\r\n        const { data } = this.props;\r\n        let classCode = data.nameCourse.split('-');\r\n        let classString = classCode[0]+classCode[1];\r\n        let generateString = randomstring.generate(5);\r\n        this.setState({ \r\n            name: data.name, \r\n            yearId: data.year,\r\n            courseId: data.course,\r\n            classCode: ( classString + generateString ).toUpperCase()\r\n        });\r\n    }\r\n    componentWillUnmount() {\r\n        this.props.setYearAndCourse({ name: '', year: 0, course: 0, nameYear: '', nameCourse: '' });\r\n    }\r\n\r\n    handleChange = event => {\r\n        this.setState({ [event.target.name]: event.target.value });\r\n    };\r\n\r\n    handleSubmit = event => {\r\n        event.preventDefault();\r\n        this.setState({ open: true });\r\n        const check = this.isErrors(this.state);\r\n        if (check) {\r\n            const {\r\n                name, classCode, openDay, closeDay, describe, classRoom, status, courseId\r\n            } = this.state;\r\n            const formData = {\r\n                name, classCode, openDay, closeDay, describe, classRoom, status, courseId\r\n            }\r\n            this.props.createNewClass(formData);\r\n        }\r\n    }\r\n\r\n    isErrors = datas => {\r\n        let name = '';\r\n        let openDay = '';\r\n        let closeDay = '';\r\n        let day = ''\r\n\r\n        if (datas.name === '') {\r\n            name = 'Tên lớp học không được để trống!';\r\n        } else if (datas.name.length < 5 || datas.name.length > 100) {\r\n            name = \"Độ dài tên lớp học lớn hơn hoặc bằng 5 ký tự và bé hơn hoặc bằng 100 ký tự!\";\r\n        } else {\r\n            name = '';\r\n        }\r\n\r\n        if (datas.openDay === null) {\r\n            openDay = 'Ngày mở lớp không được để trống!';\r\n        } else {\r\n            openDay = '';\r\n        }\r\n\r\n        if (datas.closeDay === null) {\r\n            closeDay = 'Ngày đóng lớp không được để trống!';\r\n        } else {\r\n            closeDay = '';\r\n        }\r\n\r\n        const op = Date.parse(datas.openDay);\r\n        const cl = Date.parse(datas.closeDay);\r\n\r\n        if ( cl - op <= 0 ) {\r\n            day = 'Ngày mở đóng lớp phải lớn hơn ngày mở lớp!';\r\n        } else {\r\n            day = '';\r\n        }\r\n\r\n        this.setState({ errors: { name, openDay, closeDay, day } });\r\n\r\n        if (name === '' \r\n            && openDay === '' \r\n            && closeDay === '' && day === '') {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    \r\n    handleClose = () => {\r\n        this.setState({ open: false });\r\n    }\r\n\r\n    render() {\r\n        const { classes, status } = this.props;\r\n        const { errors, name, classCode } = this.state;\r\n        var isShowMessageBeforeSubit = errors.name !== '' \r\n            || errors.openDay !== '' \r\n            || errors.closeDay !== ''\r\n            || errors.day !== '';\r\n        var isShowMessageFailueAfterSubit = !status.progress \r\n            && status.status === 'ADD_FAILED'\r\n            && status.data.status === 400 \r\n            && status.data.response;\r\n        var isShowMessageSuccessAfterSubit = !status.progress \r\n            && status.status === 'ADD_SUCCESS';\r\n\r\n        let alert = () => {\r\n            if (isShowMessageBeforeSubit \r\n                || (!isShowMessageBeforeSubit \r\n                && isShowMessageFailueAfterSubit)\r\n            ) {\r\n                return (\r\n                    <Snackbar\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={\r\n                            this.state.open && (isShowMessageBeforeSubit || isShowMessageFailueAfterSubit)\r\n                        }\r\n                        autoHideDuration={6000}\r\n                        ContentProps={{\r\n                            'aria-describedby': 'message-id',\r\n                        }}\r\n                    >\r\n                        <SnackbarContent\r\n                            className={classes.error}\r\n                            message={\r\n                                <span>\r\n                                    <ul>\r\n                                        {errors.name !== '' ? <li>{errors.name}</li> : ''}\r\n                                        {errors.openDay !== '' ? <li>{errors.openDay }</li> : ''}\r\n                                        {errors.closeDay  !== '' ? <li>{errors.closeDay}</li> : ''}\r\n                                        {errors.day !== '' ? <li>{errors.day}</li> : ''}\r\n                                        {(!isShowMessageBeforeSubit && status.data.status === 400 && status.data.response) ?\r\n                                            <li>{status.data.response.createClassFailed ? status.data.response.createClassFailed : 'Tạo năm học thất bại!'}</li> : ''}\r\n                                    </ul>\r\n                                </span>\r\n                            }\r\n                            action={[\r\n                                <span>\r\n                                    <IconButton\r\n                                        key=\"close\"\r\n                                        aria-label=\"Close\"\r\n                                        color=\"inherit\"\r\n                                        className={classes.close}\r\n                                        onClick={this.handleClose}\r\n                                    >\r\n                                        <CloseIcon />\r\n                                    </IconButton>\r\n                                </span>\r\n                            ]}\r\n                        />\r\n                    </Snackbar>\r\n                )\r\n            } else if (!isShowMessageBeforeSubit && isShowMessageSuccessAfterSubit) {\r\n                return (\r\n                    <Snackbar\r\n                        anchorOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        open={this.state.open && !isShowMessageBeforeSubit}\r\n                        autoHideDuration={6000}\r\n                        ContentProps={{\r\n                            'aria-describedby': 'message-id',\r\n                        }}\r\n                    >\r\n                        <SnackbarContent\r\n                            className={classes.success}\r\n                            message={\r\n                                <span>\r\n                                    <ul>\r\n                                        {(!isShowMessageBeforeSubit && isShowMessageSuccessAfterSubit) ? <li>Thêm lớp học thành công!</li> : ''}\r\n                                    </ul>\r\n                                </span>\r\n                            }\r\n                            action={[\r\n                                <span>\r\n                                    <IconButton\r\n                                        key=\"close\"\r\n                                        aria-label=\"Close\"\r\n                                        color=\"inherit\"\r\n                                        className={classes.close}\r\n                                        onClick={this.handleClose}\r\n                                    >\r\n                                        <CloseIcon />\r\n                                    </IconButton>\r\n                                </span>\r\n                            ]}\r\n                        />\r\n                    </Snackbar>\r\n                )\r\n            }\r\n        }\r\n        return (\r\n            <DocumentTitle title=\".:Chi tiết lớp học:.\">\r\n                <div className={`${styles.formAddNewYears}`}>\r\n                    {alert()}\r\n                    <h4 className=\"label-title\">Thông tin chi tiết lớp học</h4>\r\n                    <div>\r\n                        <div><b>Chú ý:</b></div>\r\n                        <ul className=\"attention\">\r\n                            <li>- Các trường thông tin đánh dấu <b>(*)</b> ở dưới là bắt buộc.</li>\r\n                            <li>- Mỗi lớp học sẽ tự động có một mã lớp khác nhau</li>\r\n                            <li>- Tên năm học tối thiểu <b>5 ký tự</b> và tối đa <b>100 ký tự.</b>.</li>\r\n                            <li>- Ngày mở lớp phải nhỏ hơn ngày đóng lớp.</li>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"contentForm\" style={{ display: 'block' }}>\r\n                        <form onSubmit={this.handleSubmit}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-2\">\r\n                                    <label htmlFor=\"classCode\"><b>Mã lớp học: (*)</b></label>\r\n                                    <input id=\"classCode\" type=\"text\" disabled placeholder=\"Mã lớp\" className={`${styles.hide}`} defaultValue={classCode}/>\r\n                                </div>\r\n                                <div className=\"col-md-4\">\r\n                                    <label htmlFor=\"name\"><b>Tên lớp học: (*)</b></label>\r\n                                    <input id=\"name\" type=\"text\" minLength=\"5\" maxLength=\"100\" onChange={this.handleChange} placeholder=\"VD: Năm học 2019\" name=\"name\" defaultValue={name} required />\r\n                                </div>\r\n                                <div className=\"col-md-6\">\r\n                                    <label htmlFor=\"classRoom\"><b>Phòng học:</b></label>\r\n                                    <input id=\"classRoom\" type=\"text\" onChange={this.handleChange} placeholder=\"VD: 201-TA1\" name=\"classRoom\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-6\">\r\n                                    <label htmlFor=\"openDay\"><b>Ngày mở lớp (*):</b></label>\r\n                                    <input type=\"date\" id=\"openDay\" onChange={this.handleChange} placeholder=\"VD: 09/05/2019\" name=\"openDay\" required/>\r\n                                </div>\r\n                                <div className=\"col-md-6\">\r\n                                    <label htmlFor=\"closeDay\"><b>Ngày đóng lớp (*):</b></label>\r\n                                    <input type=\"date\" id=\"closeDay\" onChange={this.handleChange} placeholder=\"VD: 09/05/2019\" name=\"closeDay\" required/>\r\n                                </div>\r\n                            </div>\r\n                            <label htmlFor=\"describe\"><b>Mô tả ngắn:</b></label>\r\n                            <textarea id=\"describe\" name=\"describe\" rows=\"10\" placeholder=\"Mô tả ngắn...\" onChange={this.handleChange}></textarea>\r\n                            <br />\r\n                            <label htmlFor=\"status\"><b>Trạng thái:</b></label>\r\n                            <select name=\"status\" id=\"status\" onChange={this.handleChange} required>\r\n                                <option value={true}>--- MỞ LỚP HỌC ---</option>\r\n                                <option value={false}>--- ĐÓNG LỚP HỌC ---</option>\r\n                            </select>\r\n                            <div className=\"clearfix\">\r\n                                <Button variant=\"contained\" type=\"submit\" color=\"primary\" className={`reset-button ${classes.button}`}>\r\n                                    THÊM MỚI\r\n                                        <AddIcon className={classes.rightIcon} />\r\n                                </Button>\r\n                                {status.progress ? <span style={{ marginLeft: 5, marginTop: 3 }}><i class=\"fa fa-spinner fa-pulse fa-3x fa-fw\" style={{ fontSize: 30 }}></i></span> : ''}\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </DocumentTitle>\r\n        );\r\n    }\r\n}\r\n\r\nFormAddDetail.propTypes = {\r\n    classes: PropTypes.object.isRequired,\r\n    data: PropTypes.object.isRequired,\r\n    createNewClass: PropTypes.func.isRequired,\r\n    status: PropTypes.object.isRequired,\r\n};\r\n\r\nFormAddDetail.defaultProps = {\r\n    status: { progress: false, status: '', data: {} },\r\n    data: { name: '', year: '', course: '' }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    status: state.class.status\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    createNewClass: classOperations.doCreateNewClass,\r\n};\r\n\r\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(style)(FormAddDetail)));\r\n"]}]}